# JavaScript 数组方法完全指南

## 一、数组创建与转换

| 方法             | 描述                           | 示例                  | 返回值                  |
| ---------------- | ------------------------------ | --------------------- | ----------------------- |
| **Array.from()** | 从类数组或可迭代对象创建新数组 | `Array.from('hello')` | `['h','e','l','l','o']` |
| **Array.of()**   | 创建包含任意类型参数的新数组   | `Array.of(1,2,3)`     | `[1,2,3]`               |
| **toString()**   | 将数组转换为字符串             | `[1,2].toString()`    | `"1,2"`                 |
| **join()**       | 将数组元素连接为字符串         | `['a','b'].join('-')` | `"a-b"`                 |

## 二、元素增删操作

| 方法          | 描述                     | 是否改变原数组 | 示例                  | 结果      |
| ------------- | ------------------------ | -------------- | --------------------- | --------- |
| **push()**    | 在数组**末尾**添加元素   | ✔️              | `[1,2].push(3)`       | `[1,2,3]` |
| **pop()**     | 删除数组**最后一个**元素 | ✔️              | `[1,2,3].pop()`       | `[1,2]`   |
| **unshift()** | 在数组**开头**添加元素   | ✔️              | `[2,3].unshift(1)`    | `[1,2,3]` |
| **shift()**   | 删除数组**第一个**元素   | ✔️              | `[1,2,3].shift()`     | `[2,3]`   |
| **splice()**  | 删除/替换/添加元素       | ✔️              | `[1,2,3].splice(1,1)` | `[1,3]`   |
| **concat()**  | 合并多个数组/值          | ❌              | `[1].concat([2])`     | `[1,2]`   |

## 三、元素遍历方法

### 1. 简单遍历

| 方法              | 描述         | 返回值    | 示例                                    |
| ----------------- | ------------ | --------- | --------------------------------------- |
| **forEach()**     | 遍历每个元素 | undefined | `arr.forEach(el => console.log(el))`    |
| **map()**         | 返回新数组   | 新数组    | `[1,2].map(x => x*2)`→`[2,4]`           |
| **reduce()**      | 从左到右累加 | 累加结果  | `[1,2,3].reduce((a,c) => a+c,0)`→`6`    |
| **reduceRight()** | 从右到左累加 | 累加结果  | `[1,2,3].reduceRight((a,c) => a+c)`→`6` |

### 2. 条件遍历

| 方法            | 描述                     | 返回值          | 示例                               |
| --------------- | ------------------------ | --------------- | ---------------------------------- |
| **filter()**    | 筛选满足条件的元素       | 新数组          | `[1,2,3].filter(n => n>1)`→`[2,3]` |
| **find()**      | 查找第一个符合条件的元素 | 元素或undefined | `[1,2,3].find(n => n>1)`→`2`       |
| **findIndex()** | 查找第一个符合条件的索引 | 索引或-1        | `[1,2,3].findIndex(n => n>1)`→`1`  |
| **every()**     | 检查所有元素是否满足条件 | Boolean         | `[1,2,3].every(n => n>0)`→`true`   |
| **some()**      | 检查是否有元素满足条件   | Boolean         | `[1,2,3].some(n => n>2)`→`true`    |

## 四、搜索与排序

| 方法              | 描述                       | 是否改变原数组 | 示例                             | 结果      |
| ----------------- | -------------------------- | -------------- | -------------------------------- | --------- |
| **indexOf()**     | 查找元素首次出现的索引     | ❌              | `['a','b','a'].indexOf('a')`     | `0`       |
| **lastIndexOf()** | 查找元素最后一次出现的索引 | ❌              | `['a','b','a'].lastIndexOf('a')` | `2`       |
| **includes()**    | 检查是否包含某个元素       | ❌              | `[1,2,3].includes(2)`            | `true`    |
| **sort()**        | 排序数组                   | ✔️              | `[3,1,2].sort()`                 | `[1,2,3]` |
| **reverse()**     | 反转数组顺序               | ✔️              | `[1,2,3].reverse()`              | `[3,2,1]` |

## 五、迭代与迭代器

| 方法          | 描述               | 返回值   | 示例                             |
| ------------- | ------------------ | -------- | -------------------------------- |
| **keys()**    | 获取数组键的迭代器 | Iterator | `for(let key of [].keys())`      |
| **values()**  | 获取数组值的迭代器 | Iterator | `for(let value of [].values())`  |
| **entries()** | 获取键值对的迭代器 | Iterator | `for(let [i,v] of [].entries())` |

## 六、子数组操作

| 方法             | 描述         | 是否改变原数组 | 示例                        | 结果        |
| ---------------- | ------------ | -------------- | --------------------------- | ----------- |
| **slice()**      | 截取数组片段 | ❌              | `[1,2,3].slice(1)`          | `[2,3]`     |
| **fill()**       | 填充数组元素 | ✔️              | `[1,2,3].fill(0)`           | `[0,0,0]`   |
| **copyWithin()** | 内部复制元素 | ✔️              | `[1,2,3,4].copyWithin(0,2)` | `[3,4,3,4]` |

## 七、数组状态检查

| 方法                | 描述           | 返回值  | 示例                       |
| ------------------- | -------------- | ------- | -------------------------- |
| **Array.isArray()** | 检查是否为数组 | Boolean | `Array.isArray([])`→`true` |
| **length**          | 数组元素数量   | Number  | `[1,2,3].length`→`3`       |

## 八、高级技巧与最佳实践

### 1. 链式操作

```
// 过滤、映射、求和
const sum = [1, 2, 3, 4]
  .filter(n => n % 2 === 0) // 保留偶数 [2,4]
  .map(n => n * 10)         // 乘以10 [20,40]
  .reduce((a, b) => a + b); // 求和 60
```

### 2. 去重方法比较

| 方法         | 示例                                                 | 特点         |
| ------------ | ---------------------------------------------------- | ------------ |
| **Set**      | `[...new Set([1,1,2])]`                              | ES6 推荐方式 |
| **filter()** | `[1,1,2].filter((v,i,a)=>a.indexOf(v)===i)`          | 兼容性好     |
| **reduce()** | `[1,1,2].reduce((a,c)=>a.includes(c)?a:[...a,c],[])` | 灵活性强     |

### 3. 性能优化

1. **大型数组处理**：

   ```
   // 使用 for 循环替代 forEach
   for (let i = 0; i < largeArray.length; i++) {
     // 处理逻辑
   }
   ```

2. **避免嵌套循环**：

   ```
   // 使用 Map 优化查找
   const map = new Map();
   array1.forEach(item => map.set(item.id, item));
   array2.forEach(item => {
     if (map.has(item.id)) {
       // 处理
     }
   });
   ```

### 4. 多维数组操作

```
// 扁平化多维数组
const deepArray = [1, [2, [3, [4]]]];
const flatArray = deepArray.flat(Infinity); // [1,2,3,4]
```

## 九、ES2023 新增方法

| 方法                | 描述                       | 是否改变原数组 | 示例                                  |
| ------------------- | -------------------------- | -------------- | ------------------------------------- |
| **findLast()**      | 从后向前查找第一个匹配元素 | ❌              | `[1,2,3].findLast(n => n>1)`→`3`      |
| **findLastIndex()** | 从后向前查找第一个匹配索引 | ❌              | `[1,2,3].findLastIndex(n => n>1)`→`2` |
| **toReversed()**    | 创建反转后的新数组         | ❌              | `[1,2].toReversed()`→`[2,1]`          |
| **toSorted()**      | 创建排序后的新数组         | ❌              | `[3,1,2].toSorted()`→`[1,2,3]`        |
| **toSpliced()**     | 创建拼接后的新数组         | ❌              | `[1,2,3].toSpliced(1,1)`→`[1,3]`      |
| **with()**          | 创建替换元素后的新数组     | ❌              | `[1,2,3].with(1, 99)`→`[1,99,3]`      |

## 十、备忘录：方法特性对比

| 方法特性           | 改变原数组 | 返回值          | 常用场景 |
| ------------------ | ---------- | --------------- | -------- |
| **push/pop**       | ✔️          | 添加/删除的元素 | 栈操作   |
| **shift/unshift**  | ✔️          | 添加/删除的元素 | 队列操作 |
| **map/filter**     | ❌          | 新数组          | 数据转换 |
| **reduce**         | ❌          | 累加结果        | 数据聚合 |
| **find/findIndex** | ❌          | 元素/索引       | 元素查找 |
| **every/some**     | ❌          | Boolean         | 条件验证 |













# 以下是具体的代码实现

# JavaScript 数组方法完全指南

## 一、数组创建与转换方法

### 1. Array.from()
- **描述**: 从类数组对象或可迭代对象创建一个新的数组实例
- **语法**: `Array.from(arrayLike[, mapFn[, thisArg]])`
- **参数**:
  - `arrayLike`: 要转换为数组的类数组或可迭代对象
  - `mapFn`(可选): 映射函数，用于处理每个元素
  - `thisArg`(可选): 执行映射函数时的this值
- **返回值**: 新的数组实例
- **示例**:
```javascript
// 从字符串创建数组
Array.from('foo'); // ['f', 'o', 'o']

// 使用映射函数
Array.from([1, 2, 3], x => x + x); // [2, 4, 6]

// 从Set创建数组
Array.from(new Set(['foo', 'bar', 'baz', 'foo'])); // ['foo', 'bar', 'baz']
```

### 2. Array.of()
- **描述**: 创建一个具有可变数量参数的新数组实例
- **语法**: `Array.of(element0[, element1[, ...[, elementN]]])`
- **参数**: 任意数量的元素
- **返回值**: 新的数组实例
- **示例**:
```javascript
Array.of(1);         // [1]
Array.of(1, 2, 3);   // [1, 2, 3]
Array.of(undefined);  // [undefined]
```

### 3. toString()
- **描述**: 返回一个字符串，表示指定的数组及其元素
- **语法**: `arr.toString()`
- **返回值**: 表示数组元素的字符串
- **示例**:
```javascript
[1, 2, 'a', '1a'].toString(); // "1,2,a,1a"
```

### 4. join()
- **描述**: 将一个数组的所有元素连接成一个字符串并返回
- **语法**: `arr.join([separator])`
- **参数**: `separator`(可选): 指定分隔符，默认为逗号
- **返回值**: 连接后的字符串
- **示例**:
```javascript
['Fire', 'Air', 'Water'].join();    // "Fire,Air,Water"
['Fire', 'Air', 'Water'].join('');   // "FireAirWater"
['Fire', 'Air', 'Water'].join('-');  // "Fire-Air-Water"
```

## 二、元素增删操作方法

### 1. push()
- **描述**: 将一个或多个元素添加到数组的末尾
- **语法**: `arr.push(element1[, ...[, elementN]])`
- **参数**: 要添加到数组末尾的元素
- **返回值**: 数组的新长度
- **改变原数组**: 是
- **示例**:
```javascript
const arr = [1, 2];
arr.push(3);        // 返回3，arr变为[1, 2, 3]
arr.push(4, 5);     // 返回5，arr变为[1, 2, 3, 4, 5]
```

### 2. pop()
- **描述**: 从数组中删除最后一个元素
- **语法**: `arr.pop()`
- **返回值**: 被删除的元素
- **改变原数组**: 是
- **示例**:
```javascript
const arr = [1, 2, 3];
arr.pop();          // 返回3，arr变为[1, 2]
```

### 3. unshift()
- **描述**: 将一个或多个元素添加到数组的开头
- **语法**: `arr.unshift(element1[, ...[, elementN]])`
- **参数**: 要添加到数组开头的元素
- **返回值**: 数组的新长度
- **改变原数组**: 是
- **示例**:
```javascript
const arr = [1, 2];
arr.unshift(0);         // 返回3，arr变为[0, 1, 2]
arr.unshift(-2, -1);    // 返回5，arr变为[-2, -1, 0, 1, 2]
```

### 4. shift()
- **描述**: 从数组中删除第一个元素
- **语法**: `arr.shift()`
- **返回值**: 被删除的元素
- **改变原数组**: 是
- **示例**:
```javascript
const arr = [1, 2, 3];
arr.shift();        // 返回1，arr变为[2, 3]
```

### 5. splice()
- **描述**: 通过删除或替换现有元素或者添加新元素来修改数组
- **语法**: `array.splice(start[, deleteCount[, item1[, item2[, ...]]]])`
- **参数**:
  - `start`: 修改的起始位置
  - `deleteCount`(可选): 要删除的元素个数
  - `item1, item2, ...`(可选): 要添加进数组的元素
- **返回值**: 由被删除的元素组成的数组
- **改变原数组**: 是
- **示例**:
```javascript
const months = ['Jan', 'March', 'April', 'June'];
months.splice(1, 0, 'Feb'); // 插入元素
// 返回[]，months变为['Jan', 'Feb', 'March', 'April', 'June']

months.splice(4, 1, 'May'); // 替换元素
// 返回['June']，months变为['Jan', 'Feb', 'March', 'April', 'May']
```

### 6. concat()
- **描述**: 用于合并两个或多个数组
- **语法**: `var new_array = old_array.concat(value1[, value2[, ...[, valueN]]])`
- **参数**: 数组或值
- **返回值**: 新的数组
- **改变原数组**: 否
- **示例**:
```javascript
const arr1 = [1, 2, 3];
const arr2 = [4, 5, 6];
arr1.concat(arr2);  // 返回[1, 2, 3, 4, 5, 6]
```

## 三、元素遍历方法

### 1. forEach()
- **描述**: 对数组的每个元素执行一次给定的函数
- **语法**: `arr.forEach(callback(currentValue[, index[, array]])[, thisArg])`
- **参数**:
  - `callback`: 为每个元素执行的函数
  - `thisArg`(可选): 执行回调时使用的this值
- **返回值**: undefined
- **示例**:
```javascript
const arr = ['a', 'b', 'c'];
arr.forEach((element, index) => {
  console.log(index + ': ' + element);
});
// 输出:
// 0: a
// 1: b
// 2: c
```

### 2. map()
- **描述**: 创建一个新数组，其结果是该数组中的每个元素调用提供的函数后的返回值
- **语法**: `var new_array = arr.map(function callback(currentValue[, index[, array]])[, thisArg])`
- **参数**:
  - `callback`: 生成新数组元素的函数
  - `thisArg`(可选): 执行回调时使用的this值
- **返回值**: 一个新数组，每个元素都是回调函数的结果
- **示例**:
```javascript
const arr = [1, 4, 9];
const roots = arr.map(Math.sqrt); // [1, 2, 3]
```

### 3. reduce()
- **描述**: 对数组中的每个元素执行一个reducer函数，将其结果汇总为单个返回值
- **语法**: `arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])`
- **参数**:
  - `callback`: 执行数组中每个值的函数
  - `initialValue`(可选): 作为第一次调用callback时的accumulator值
- **返回值**: 累加结果
- **示例**:
```javascript
const arr = [1, 2, 3, 4];
const sum = arr.reduce((acc, cur) => acc + cur, 0); // 10
```

### 4. reduceRight()
- **描述**: 从右到左对数组中的每个元素执行一个reducer函数
- **语法**: `arr.reduceRight(callback(accumulator, currentValue[, index[, array]])[, initialValue])`
- **参数**: 同reduce()
- **返回值**: 累加结果
- **示例**:
```javascript
const arr = [[0, 1], [2, 3], [4, 5]];
const flattened = arr.reduceRight((acc, cur) => acc.concat(cur), []);
// [4, 5, 2, 3, 0, 1]
```

### 5. filter()
- **描述**: 创建一个新数组，包含通过所提供函数测试的所有元素
- **语法**: `var newArray = arr.filter(callback(element[, index[, array]])[, thisArg])`
- **参数**:
  - `callback`: 用来测试每个元素的函数
  - `thisArg`(可选): 执行回调时使用的this值
- **返回值**: 一个新的通过测试的元素组成的数组
- **示例**:
```javascript
const words = ['spray', 'limit', 'elite', 'exuberant', 'destruction'];
const result = words.filter(word => word.length > 6);
// ["exuberant", "destruction"]
```

### 6. find()
- **描述**: 返回数组中满足提供的测试函数的第一个元素的值
- **语法**: `arr.find(callback(element[, index[, array]])[, thisArg])`
- **参数**:
  - `callback`: 测试函数
  - `thisArg`(可选): 执行回调时使用的this值
- **返回值**: 数组中第一个满足测试函数的元素，否则返回undefined
- **示例**:
```javascript
const arr = [5, 12, 8, 130, 44];
const found = arr.find(element => element > 10); // 12
```

### 7. findIndex()
- **描述**: 返回数组中满足提供的测试函数的第一个元素的索引
- **语法**: `arr.findIndex(callback(element[, index[, array]])[, thisArg])`
- **参数**: 同find()
- **返回值**: 满足测试函数的第一个元素的索引，否则返回-1
- **示例**:
```javascript
const arr = [5, 12, 8, 130, 44];
const index = arr.findIndex(element => element > 13); // 3
```

### 8. every()
- **描述**: 测试数组中的所有元素是否都通过了指定函数的测试
- **语法**: `arr.every(callback(element[, index[, array]])[, thisArg])`
- **参数**:
  - `callback`: 测试函数
  - `thisArg`(可选): 执行回调时使用的this值
- **返回值**: 布尔值，所有元素都通过测试则返回true
- **示例**:
```javascript
const isBelowThreshold = (currentValue) => currentValue < 40;
const arr = [1, 30, 39, 29, 10, 13];
arr.every(isBelowThreshold); // true
```

### 9. some()
- **描述**: 测试数组中是否至少有一个元素通过了指定函数的测试
- **语法**: `arr.some(callback(element[, index[, array]])[, thisArg])`
- **参数**: 同every()
- **返回值**: 布尔值，至少有一个元素通过测试则返回true
- **示例**:
```javascript
const arr = [1, 2, 3, 4, 5];
const even = (element) => element % 2 === 0;
arr.some(even); // true
```

## 四、搜索与排序方法

### 1. indexOf()
- **描述**: 返回在数组中可以找到给定元素的第一个索引
- **语法**: `arr.indexOf(searchElement[, fromIndex])`
- **参数**:
  - `searchElement`: 要查找的元素
  - `fromIndex`(可选): 开始查找的位置
- **返回值**: 首个被找到的元素在数组中的索引，否则返回-1
- **示例**:
```javascript
const beasts = ['ant', 'bison', 'camel', 'duck', 'bison'];
beasts.indexOf('bison');     // 1
beasts.indexOf('bison', 2);  // 4
beasts.indexOf('giraffe');   // -1
```

### 2. lastIndexOf()
- **描述**: 返回指定元素在数组中的最后一个索引
- **语法**: `arr.lastIndexOf(searchElement[, fromIndex])`
- **参数**: 同indexOf()
- **返回值**: 数组中该元素最后一个出现的索引，否则返回-1
- **示例**:
```javascript
const animals = ['Dodo', 'Tiger', 'Penguin', 'Dodo'];
animals.lastIndexOf('Dodo');   // 3
animals.lastIndexOf('Tiger');   // 1
```

### 3. includes()
- **描述**: 判断数组是否包含某个特定值
- **语法**: `arr.includes(valueToFind[, fromIndex])`
- **参数**:
  - `valueToFind`: 需要查找的值
  - `fromIndex`(可选): 从该索引处开始查找
- **返回值**: 布尔值，表示是否包含该值
- **示例**:
```javascript
[1, 2, 3].includes(2);      // true
[1, 2, 3].includes(4);      // false
[1, 2, 3].includes(3, 3);    // false
```

### 4. sort()
- **描述**: 对数组的元素进行排序
- **语法**: `arr.sort([compareFunction])`
- **参数**: `compareFunction`(可选): 指定排序顺序的函数
- **返回值**: 排序后的数组
- **改变原数组**: 是
- **示例**:
```javascript
const months = ['March', 'Jan', 'Feb', 'Dec'];
months.sort(); // ["Dec", "Feb", "Jan", "March"]

const numbers = [4, 2, 5, 1, 3];
numbers.sort((a, b) => a - b); // [1, 2, 3, 4, 5]
```

### 5. reverse()
- **描述**: 将数组中元素的位置颠倒
- **语法**: `arr.reverse()`
- **返回值**: 颠倒后的数组
- **改变原数组**: 是
- **示例**:
```javascript
const arr = [1, 2, 3];
arr.reverse(); // [3, 2, 1]
```

## 五、迭代器方法

### 1. keys()
- **描述**: 返回一个包含数组中每个索引键的Array Iterator对象
- **语法**: `arr.keys()`
- **返回值**: 一个新的Array迭代器对象
- **示例**:
```javascript
const arr = ['a', 'b', 'c'];
const iterator = arr.keys();

for (const key of iterator) {
  console.log(key); // 0, 1, 2
}
```

### 2. values()
- **描述**: 返回一个包含数组中每个值的Array Iterator对象
- **语法**: `arr.values()`
- **返回值**: 一个新的Array迭代器对象
- **示例**:
```javascript
const arr = ['a', 'b', 'c'];
const iterator = arr.values();

for (const value of iterator) {
  console.log(value); // 'a', 'b', 'c'
}
```

### 3. entries()
- **描述**: 返回一个包含数组中每个索引的键值对的Array Iterator对象
- **语法**: `arr.entries()`
- **返回值**: 一个新的Array迭代器对象
- **示例**:
```javascript
const arr = ['a', 'b', 'c'];
const iterator = arr.entries();

for (const [index, element] of iterator) {
  console.log(index, element); 
  // 0 'a'
  // 1 'b'
  // 2 'c'
}
```

## 六、子数组操作方法

### 1. slice()
- **描述**: 返回一个新的数组对象，是原数组的浅拷贝
- **语法**: `arr.slice([begin[, end]])`
- **参数**:
  - `begin`(可选): 提取起始处的索引
  - `end`(可选): 提取终止处的索引
- **返回值**: 一个新的数组，包含提取的元素
- **改变原数组**: 否
- **示例**:
```javascript
const animals = ['ant', 'bison', 'camel', 'duck', 'elephant'];
animals.slice(2);      // ["camel", "duck", "elephant"]
animals.slice(2, 4);   // ["camel", "duck"]
animals.slice(1, 5);   // ["bison", "camel", "duck", "elephant"]
```

### 2. fill()
- **描述**: 用一个固定值填充一个数组中从起始索引到终止索引内的全部元素
- **语法**: `arr.fill(value[, start[, end]])`
- **参数**:
  - `value`: 用来填充数组元素的值
  - `start`(可选): 起始索引，默认0
  - `end`(可选): 终止索引，默认this.length
- **返回值**: 修改后的数组
- **改变原数组**: 是
- **示例**:
```javascript
[1, 2, 3].fill(4);            // [4, 4, 4]
[1, 2, 3].fill(4, 1);         // [1, 4, 4]
[1, 2, 3].fill(4, 1, 2);      // [1, 4, 3]
```

### 3. copyWithin()
- **描述**: 浅复制数组的一部分到同一数组中的另一个位置
- **语法**: `arr.copyWithin(target[, start[, end]])`
- **参数**:
  - `target`: 复制序列到该位置
  - `start`(可选): 开始复制的起始位置
  - `end`(可选): 开始复制的结束位置
- **返回值**: 改变后的数组
- **改变原数组**: 是
- **示例**:
```javascript
[1, 2, 3, 4, 5].copyWithin(0, 3);      // [4, 5, 3, 4, 5]
[1, 2, 3, 4, 5].copyWithin(0, 3, 4);   // [4, 2, 3, 4, 5]
[1, 2, 3, 4, 5].copyWithin(0, -2, -1); // [4, 2, 3, 4, 5]
```

## 七、数组状态检查方法

### 1. Array.isArray()
- **描述**: 用于确定传递的值是否是一个Array
- **语法**: `Array.isArray(obj)`
- **参数**: `obj`: 需要检测的值
- **返回值**: 布尔值，如果是数组则返回true
- **示例**:
```javascript
Array.isArray([1, 2, 3]);  // true
Array.isArray({foo: 123});   // false
Array.isArray('foobar');     // false
Array.isArray(undefined);    // false
```

## 八、ES2023新增方法

### 1. findLast()
- **描述**: 从数组的最后一个元素开始向前查找，返回第一个满足条件的元素
- **语法**: `arr.findLast(callback(element[, index[, array]])[, thisArg])`
- **参数**: 同find()
- **返回值**: 数组中最后一个满足测试函数的元素，否则返回undefined
- **示例**:
```javascript
const array = [5, 12, 50, 130, 44];
const found = array.findLast(element => element > 45); // 130
```

### 2. findLastIndex()
- **描述**: 从数组的最后一个元素开始向前查找，返回第一个满足条件的元素的索引
- **语法**: `arr.findLastIndex(callback(element[, index[, array]])[, thisArg])`
- **参数**: 同findIndex()
- **返回值**: 最后一个满足测试函数的元素的索引，否则返回-1
- **示例**:
```javascript
const array = [5, 12, 50, 130, 44];
const found = array.findLastIndex(element => element > 45); // 3
```

### 3. toReversed()
- **描述**: 返回一个新数组，元素顺序与原数组相反，不改变原数组
- **语法**: `arr.toReversed()`
- **返回值**: 新的反转后的数组
- **改变原数组**: 否
- **示例**:
```javascript
const arr = [1, 2, 3];
const reversed = arr.toReversed(); // [3, 2, 1]
console.log(arr); // [1, 2, 3] (原数组未改变)
```

### 4. toSorted()
- **描述**: 返回一个新数组，元素已排序，不改变原数组
- **语法**: `arr.toSorted([compareFunction])`
- **参数**: `compareFunction`(可选): 指定排序顺序的函数
- **返回值**: 新的排序后的数组
- **改变原数组**: 否
- **示例**:
```javascript
const arr = [3, 1, 2];
const sorted = arr.toSorted(); // [1, 2, 3]
console.log(arr); // [3, 1, 2] (原数组未改变)
```

### 5. toSpliced()
- **描述**: 返回一个新数组，在指定位置删除和/或添加元素，不改变原数组
- **语法**: `arr.toSpliced(start[, deleteCount[, item1[, item2[, ...]]]])`
- **参数**: 同splice()
- **返回值**: 新的修改后的数组
- **改变原数组**: 否
- **示例**:
```javascript
const arr = [1, 2, 3, 4];
const spliced = arr.toSpliced(1, 2, 5, 6); // [1, 5, 6, 4]
console.log(arr); // [1, 2, 3, 4] (原数组未改变)
```

### 6. with()
- **描述**: 返回一个新数组，指定索引处的元素被替换为给定值，不改变原数组
- **语法**: `arr.with(index, value)`
- **参数**:
  - `index`: 要修改的索引
  - `value`: 要替换的值
- **返回值**: 新的修改后的数组
- **改变原数组**: 否
- **示例**:
```javascript
const arr = [1, 2, 3, 4];
const newArr = arr.with(2, 99); // [1, 2, 99, 4]
console.log(arr); // [1, 2, 3, 4] (原数组未改变)
```

## 九、实用技巧与最佳实践

### 1. 数组去重
```javascript
// 使用Set (ES6)
const uniqueArray = [...new Set([1, 2, 2, 3, 4, 4])]; // [1, 2, 3, 4]

// 使用filter
const uniqueArray2 = [1, 2, 2, 3, 4, 4].filter((value, index, self) => {
  return self.indexOf(value) === index;
});

// 使用reduce
const uniqueArray3 = [1, 2, 2, 3, 4, 4].reduce((acc, cur) => {
  return acc.includes(cur) ? acc : [...acc, cur];
}, []);
```

### 2. 数组扁平化
```javascript
// 使用flat (ES2019)
const nested = [1, [2, [3, [4]]]];
nested.flat(Infinity); // [1, 2, 3, 4]

// 使用reduce和concat
function flatten(arr) {
  return arr.reduce((acc, cur) => {
    return Array.isArray(cur) ? acc.concat(flatten(cur)) : acc.concat(cur);
  }, []);
}
```

### 3. 数组分组
```javascript
// 按属性分组
const people = [
  { name: 'Alice', age: 21 },
  { name: 'Max', age: 20 },
  { name: 'Jane', age: 20 }
];

const grouped = people.reduce((acc, person) => {
  const key = person.age;
  if (!acc[key]) {
    acc[key] = [];
  }
  acc[key].push(person);
  return acc;
}, {});
// {20: [{name: "Max", age: 20}, {name: "Jane", age: 20}], 21: [{name: "Alice", age: 21}]}
```

### 4. 链式操作
```javascript
// 过滤、映射、求和
const sum = [1, 2, 3, 4, 5, 6]
  .filter(n => n % 2 === 0)     // 保留偶数 [2, 4, 6]
  .map(n => n * 10)             // 乘以10 [20, 40, 60]
  .reduce((a, b) => a + b, 0);  // 求和 120
```

## 十、性能注意事项

1. **大型数组处理**：
   ```javascript
   // 使用for循环而不是forEach
   for (let i = 0; i < largeArray.length; i++) {
     // 处理逻辑
   }
   ```

2. **避免不必要的拷贝**：
   ```javascript
   // 不好的做法：创建不必要的中间数组
   const result = largeArray
     .filter(x => x > 10)
     .map(x => x * 2)
     .slice(0, 10);
   
   // 更好的做法：使用reduce一次性处理
   const result = largeArray.reduce((acc, x) => {
     if (x > 10 && acc.length < 10) {
       acc.push(x * 2);
     }
     return acc;
   }, []);
   ```

3. **使用适当的数据结构**：
   ```javascript
   // 如果需要频繁查找，使用Set或Map
   const set = new Set(largeArray);
   if (set.has(value)) {
     // 快速查找
   }
   ```
